<!DOCTYPE html>
<html>
<head>
  <% include ../partials/head.html.ejs %>
  <link rel="stylesheet" type="text/css" href="/css/projdet.css">
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places"></script>
</head>
<style type="text/css">
	#desktop-projDet .ui.images {
		padding: 1rem 0;
	}

	#desktop-projDet .ui.images .image, #desktop-projDet .ui.images img {
		width: 120px !important;
	}
	/*._pImage_ {
		min-height: 63px;
		margin-top: 8px;
  		background-position: center !important;
  		background-repeat: no-repeat !important;
  		background-size: 63px 63px !important;
	}*/
	._subReqP_ {
		cursor: pointer
	}
</style>

<body>
  <% include ../partials/header.html.ejs %>
  <% include ../popups/leads.html.ejs %>

  <!-- Proj Detailing starts here -->
<div id="__proDet__">
  	<!-- For mobile screens -->
  		

  	<!-- ends here -->

	<% if(locals.req.device.type != 'desktop'){ %>
		<div id="mobile-projDet" class="ui grid projDet">

		<div class="sixteen wide column">
	<% } %>

	<% if(locals.req.device.type == 'desktop'){ %>
	<div id="desktop-projDet" class="ui divided padded grid projDet">

		<div class="ten wide column">
	<% } %>
			<input id="_projectId" value="<%= projectId %>" type="hidden">
			<input id="__name_" value="<%= result.name%>" type="hidden">
     
			<div class="content" style="padding:.6rem;background:#fff;box-shadow:0 0 2px rgba(0,0,0,0.2);margin-bottom:2rem;">
				<div class="ui inverted title grid" style="margin:0;padding:0 !important;">
					<div class="twelve wide column _csn">				
						<h2 class="ui header"><%= result.name %></h2>
						<h4 class="ui header"><%= result.builderName %></h4>
					</div>
					<div class="four wide column _csn" style="text-align: right;">
						<h2><i class="rupee icon"></i> <%= getPriceText(result.price[0]) %> - <%= getPriceText(result.price[1]) %> </h2>
					</div>
				</div>
				<div class="description" style="padding:1rem;border-top: 2px solid #eaeaea !important;">
			        <p>No description available.</p>
			    </div>
				<table class="ui table" style="margin:0 !important;padding-bottom:0 !important;">
				  	<tr>
				      <td style="border:0 !important;">Built-up Area</td>
				      <td style="border:0 !important;">580-1350 sq.ft.</td>
				    </tr>
				    <tr>
				      <td>BHK</td>
				      <td><%= result.bhk %></td>
				    </tr>
				    <tr>
				    	<td>Possession</td>
				      <td><%= result.possession %></td>
				    </tr>
				    <tr>
				    	<td>Type</td>
				      	<td><%= result.type %></td>
				    </tr>
				    <tr>
				    	<td>Locality</td>
				      	<td id="location"><%= result.location.name %>, <%= result.location.city %>, <%= result.location.state%>, India</td>
				    </tr>
				</table>
			</div>	
			<input id="_projectId_" type="hidden" value="<%= result.id %>">
			
			<% if(locals.req.device.type != 'desktop'){ %>
			<div style="text-align:center">
				<div class="ui button" style="background:#fff;border: 1px solid #ddd;margin-bottom:1rem;"><a href="/agent-listing?projectId=<%= result.id %>&name=<%= result.name %>"> View agents of this project</a></div>
			</div>
			<% } %>
			
			<div class="ui inverted xtra _actions" style="padding-bottom:1rem;">
				<div class="ui blue button req-details" data-bind="click:function(){requestDetails('<%= result.id %>') }"><i class="icon edit"></i>Request Details</div>
				<div class="ui blue button leads-in" data-bind="click:function(){enquireNow('<%= result.id %>') }"><i class="icon help circle"></i>Enquire</div>
				 <div class="ui basic" data-bind="html:fbIntegration('<%= result.id %>')" style="float:right;padding:15px;"></div>
			</div>
			<div class="ui top attached tabular menu">
			  <a class="item active" data-tab="first">Locality</a>
			  <a class="item" data-tab="second">Images</a>
			  <a class="item" data-tab="third">Floor Plan</a>
			</div>
			
			<div class="ui bottom attached active tab segment locality" data-tab="first">
				<div class="ui">
					<div class="">
					    <div class="title _csn _txt_cntr" data-tab-item="air">
					     	Airports
					    </div>
					    <div class="title _csn _txt_cntr" data-tab-item="school">
							Schools
					    </div>
					    <div class="title _csn _txt_cntr" data-tab-item="bus">
					    	Bus
					    </div>
					    <div class="title _csn _txt_cntr" data-tab-item="bank">
					    	Banks
					    </div>
					    <div class="title _csn _txt_cntr" data-tab-item="store">
							Store
					    </div>
					    <div class="title _csn _txt_cntr" data-tab-item="food">
					    	Resturants
					    </div>
					</div>
				    <div class="active content _lclt_tb_cnt" data-tab-item="air">
				    	<div id="map-canvas" name="mapdiv" style="width: 100%;height: 500px;"> </div>
						<!-- <p>Indira Gandhi International Airport T-318 min 12.9 km </p>
						<p>Indira Gandhi International Airport T-318 min 12.9 km </p> -->
				    </div>
				  </div>
			</div>
			<div class="ui bottom attached tab segment" data-tab="second">
				<% if(result.profileImage!=null){%>
				<img class="ui medium rounded image" src="<%=result.profileImage%>"/>
				<%} else if (result.gallery!=null && result.gallery.length>0){%>
					<img class="ui medium rounded image" src="<%=result.gallery[0]%>"/>
				<%}else {%>
					<img class="ui medium rounded image" src="/images/square-image.png"/>
				<%}%>
				<div class="ui images">
				  <% if(result.gallery!=null && result.gallery.length>0){
						 for(var glry=0 ;glry<result.gallery.length;glry++){		  %>
							<img class="ui image" src="<%=result.gallery[glry]%>">
						<%}
					}%>
				</div>
				<%	if( result.profileImage==null && (result.gallery==null || result.gallery.length==0)) {	%>
					<div style="padding: 1rem; color: rgb(123, 123, 123); border-left-width: 2px; border-left-style: solid; border-left-color: rgb(0, 159, 218); box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 2px; background: rgb(255, 255, 255);margin-bottom:1rem;">
				    	No Gallery Found. 
				    </div>
				<%}	%>
			</div>
			<div class="ui bottom attached tab segment floorPlan _txt_cntr" data-tab="third">
				<% if(result.floorPlan!=null){
					 for(var fp=0 ;fp<result.floorPlan.length;fp++){		  %>											
						<img class="ui medium image _csn" src="<%=result.floorPlan[fp]%>">
					<%}
				}
				if(result.floorPlan==null || result.floorPlan.length==0) {
				%>
					<div style="padding: 1.5rem; color: rgb(123, 123, 123); border-left-width: 2px; border-left-style: solid; border-left-color: rgb(0, 159, 218); box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 2px; background: rgb(255, 255, 255);">
				    	No floor plan found. 
				    </div>
				<%}
				%>
			</div>
		</div>

		<% if(locals.req.device.type != 'desktop'){ %>
		
			<div class="sixteen wide column">

		<% } %>

		<% if(locals.req.device.type == 'desktop'){ %>
		
			<div class="six wide column">
				
		<% } %>
		<% if(locals.req.device.type == 'desktop'){ %>
			<div class="ui top attached tabular menu" style="margin: 0 -.05rem;border-bottom:0;">
			  <div class="active item pref_agents_btn" id="pref_agents_btn">AGENTS	
			  <i data-bind="visible:!showAgent()" class="ui active inline loader"></i></div>
			 </div>
			<div id="pref_agents" class="ui bottomm active attached tab segment">
			 <div data-bind="visible:(agents().length==0 && showAgent())" style=" background:#fff;padding: 1.5rem;color: #7b7b7b;display:none;
             border-left: 2px solid #009fda;box-shadow:0 0 2px rgba(0,0,0,0.2);">
		    	No preferred agent found for this project. 
		    </div>
		    <!-- ko if:agents().length!=0 -->
			<div class="ui divided items" style="display:none" data-bind="foreach : agents,visible:showAgent()">
			  <div class="item">
			    <div class="content">
			    	<!-- ko if:$data.imageUrl!=null -->
						<div class="ui image tiny _pImage_" style="padding:0 .5em 0 0 !important;height: 65px;background-size: 100%;background-repeat: no-repeat;margin-right:5px;background-position:center" data-bind="style: { backgroundImage: 'url('+imageUrl+')'}"></div>
					<!-- /ko -->
					<!-- ko if:($data.imageUrl==null || $data.imageUrl=='') -->
						<div class="ui image tiny _pImage_" style="padding:0 .5em 0 0 !important; background-image:url(/images/elliot.jpg);background-size: 100%;background-repeat: no-repeat;margin-right:5px;"></div>
					<!-- /ko -->	
							
			      <a data-bind="attr: { href: '/'+irxId},text : name" class="header">Elliot Fu</a>
			      <div class="meta">
			      	<!-- ko if:$data.hasOwnProperty('companyName')--> 
			        	<div class="price" data-bind="text : companyName" style="padding:.5rem 0;"></div>
		          	<!-- /ko -->
		          	<!-- ko if:!($data.hasOwnProperty('companyName'))--> 
			        	<div class="price" style="padding:.5rem 0;">Company not available</div>
		          	<!-- /ko -->
			         
			        <div class="cinema"><i class="map marker icon"></i><!-- ko if:location && location.city--><!--ko text: location.city--><!--/ko--><!--/ko--><!-- ko if:!location || !location.city-->Location not found<!--/ko--></div>
			      </div>
			      <div class="description" style="margin-top:15px;">
			        Projects : 

			        <span data-bind="foreach : projects" style="margin-right:0;">
			          <!-- ko if:$index()<=1 -->
			            <span class="header" data-bind="text : $data"></span>
			             <!-- ko if:$index()==0 -->
			              <span class="header">,</span>
			             <!-- /ko -->
			          <!-- /ko -->
			        </span>
			        <span data-bind="if:projects.length>2">
			        (+
			          <span class="header" data-bind="text : projects.length-2"></span>)
			        </span>
			       </div>
			       <div class="description">
			          Operating Localities :
			          	<!-- ko if:locationProjects.length>0 --> 
			          		<span data-bind="foreach : locationProjects" style="margin-right:0;">
			            		<!-- ko if:$index()<=1 -->
			              			<span class="header" data-bind="text : $data"></span>
		               				<!-- ko if:$index()==0 -->
		                				<span class="header">,</span>
					               	<!-- /ko -->
					            <!-- /ko -->
					        </span>
			            <!-- /ko -->
			            <!-- ko if:locationProjects.length==0 -->
			            	<span class="header" >No Operating Localities</span>
			            <!-- /ko -->
			        <span data-bind="if:locationProjects.length>2">
			        (+
			          <span class="header" data-bind="text : locationProjects.length-2"></span>)
			        </span>
			      </div>
			      <div class="extra">
			        <div class="ui right floated label _subReqP_" data-bind="click:function(){$parent.checkData($data)}">Enquire</div>
			       
			      </div>
			    </div>
			  </div>
			</div>
				<!-- ko if:agents().length > 9 -->
					<div class="ui centered aligned grid" data-bind="visible:showAgent()" style="padding: 2rem 0;display:none">
						<div class="ui button" style="background:#fff;border: 1px solid #ddd"><a href="/agent-listing?projectId=<%= result.id %>&name=<%= result.name %>"> View all agents</a></div>
					</div>
				<!-- /ko -->
			<!-- /ko -->
				
			</div>
		<% } %>
			<!-- <img class="ui medium rounded image" src="https://maps.googleapis.com/maps/api/staticmap?center=<%= result.location.name %>+<%= result.location.city %>+<%= result.location.state%>+India&zoom=15&size=500x400&maptype=roadmap"> -->
		</div>
	</div>
  <!-- Proj detailing ends here -->
</div>
<% include ../popups/request-details.html.ejs %>

  <% include ../partials/footer.html.ejs %>
   <script type="text/javascript" src="/js/project-detail.js"></script>
</body>