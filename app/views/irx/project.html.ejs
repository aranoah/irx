<!DOCTYPE html>
<html>
<head>
  <% include ../partials/head.html.ejs %>  
</head>
<style type="text/css">
	.mobileFilter.ui.menu {
		background: inherit !important;
		box-shadow: none !important;
	}

	.mobileFilter.ui.menu>.item {
		display: block !important;
	}
	#HideFilter {
		display: none;
	}

	.ui.header .icon:only-child {
	  display: inline-block;
	  padding: 0;
	  margin-right: .5rem;
	  vertical-align: baseline;
	  font-size: medium;
	}
	.proj-listing h5.ui.header {
		padding-left: 1.2rem;
		opacity: .8;
		font-weight: 400;
		color: #747474;
		font-size: .9em;
	}

	.tempBtn {
	  float: right;
  	  border: 1px solid #ddd;
  	  padding: 7px 10px;
      background: #fff;
	}
	._hide_ {
		display:none;
	}
	.ui.items>.item>.content a {
	  color: #345D71 !important;
	  -webkit-transition: color .2s ease;
	  transition: color .2s ease;
	}
	.pDate {
		margin-right: 15px;
	}
	.extra.pDate{
		color: #838080;
        opacity: .8;
	}

	.pj-items.extra >.ui.horizontal.label{
		font-weight: 400;
		border-radius: 2px;
		color: #737373;
	}
	.proContent {
		color: #607d8b !important;
		cursor: default !important;
	}
	.ui.table td {
	  text-align: left;
	  vertical-align: middle;
	}
	
	.proFilters{
		background: #fff !important;
        border: 1px solid #ddd !important;
	}
	.default.text{
		color: rgb(29, 29, 29) !important;
        font-weight: 300;

	}
	.ui.menu .item:before {
		background: linear-gradient(rgba(0, 0, 0, 0) 0,rgba(0, 0, 0, 0) 50%,rgba(0, 0, 0, 0) 100%);
	}
	span.ui.teal.label {
color: #00B5AD!important;
border-color: #00B5AD!important;
background: #FFF!important;
border: 1px solid #EEE !important;
font-weight: normal;
font-size: 13px;
text-transform: capitalize;
border-left: 2px solid #00B5AD !important;
margin-right: 10px;
}

  </style>

</head>
<body class="<%="irx-"+(locals.req.device.type)%>">
    <% locals.searchtype='project' %>
	<% locals.uiContext.menu=true %>
  	<% include ../partials/header.html.ejs %>
  	<% include ../popups/leadsFilter.html.ejs %>
<div id="projListing">
  	<div id="projectContent">
  		<% if(locals.req.device.type == 'desktop'){ %>
  			<div class="fixedwidth">
	  	<% } %>
	  
	  	
	  	<% if(!locals.req.device || locals.req.device.type != 'desktop'){ %>
	  		<div class="fourteen wide column" style="padding:0 1rem !important;">
	  	<% } %> 
	  	<!-- For mobile screens -->

	  	<% if(!locals.req.device || locals.req.device.type != 'desktop'){ %>
			<div class="ui menu rib-head" style="border:0 !important;margin:0;">
			<!-- ko if:totalCount!=0 -->
				<h2 class="ui header item"> <h2 class="ui header item"> <!-- ko text:(totalCount()>0?totalCount():'') --><!-- /ko --> PROJECTS </h2> <!-- /ko -->
			</h2>    
			<a class="right menu" style="padding:.5rem 0;">
			<div id="mobFilter" class="ui teal label"><i style="margin-right: 0;" class="icon filter"></i></div>
			<div id="HideFilter" class="ui teal label"><i style="margin-right: 0;" class="icon hide"></i></div>
			</a>
			</div>

			<div class="mobileFilter ui menu" style="display:none;">
			<div class="item">
			<div class="ui right labeled icon dropdown button">
			<input type="hidden" name="type" data-bind="value:filters.type, event: {  change:applyFilters }">
			<div class="default text">Property Type</div>
			<i class="angle down icon"></i>
			<div class="menu">
			<div class="item" data-value="all">All</div>
			<div class="item" data-value="apartments">Apartment</div>
			<div class="item" data-value="independent house">Independent House</div>
			<div class="item" data-value="villas">Villas</div>
			<div class="item" data-value="plot">Plot</div>
			<div class="item" data-value="row house">Row House</div>
			</div>
			</div>
			</div>
			<div class="item">
			<div class="ui right labeled icon dropdown button">
			<input type="hidden" name="status" data-bind="textInput:filters.status, event: {  change:applyFilters }">
			<div class="default text">Status</div>
			<i class="angle down icon"></i>
			<div class="menu">
			  <div class="item" data-value="all">All</div>
			  <div class="item" data-value="ongoing">ongoing</div>
			  <div class="item" data-value="completed">completed</div>
			  <div class="item" data-value="upcoming">upcoming</div>            
			</div>
			</div>
			</div>
			<div class="item">
			  <div class="ui right labeled icon dropdown button">
			  <input type="hidden" name="order" data-bind="value:filters.order, event: {  change:applyFilters }">
			  <div class="default text">Sort by relevance</div>
			  <i class="sort right icon"></i>
			  <div class="menu">
			    <div class="item" data-value="asc">Newest</div>
			    <div class="item" data-value="desc">Price : High to Low</div>
			    <div class="item" data-value="asc">Price : Low to High</div>            
			  </div>
			</div>
			</div>
			<div class="item">
			<div class="ui checkbox _hasDistress_">
			<input type="checkbox" name="distress">
			<label>Show Inventory</label>
			</div>
			</div>


			</div>

			<div class="item tempBtn" style="float:right" data-bind="visible:filters.locationFlag()=='true'" >

			<a data-bind="attr:{href:'/agent-listing?projectId='+filters.projectId()+'&name='+filters.name()+'&isLocality=true'}">
			<div style="position:relative;right:0;color:#337ec8">Show agents</div>
			</a>
			</div>
			<% } %>
			<!-- ends here -->
	  	
	  	<% if(locals.req.device.type == 'desktop'){ %>
	  	<div class="ui menu rib-head" >
	        	<h2 class="ui header item"style="float:left;"> <!-- ko text:(totalCount()>0?totalCount():'') --><!-- /ko --> PROJECTS </h2>

	        <a class="right menu">
		        <div class="item">
		          <div class="ui right labeled icon dropdown button proFilters type">
		            <input type="hidden" name="type" data-bind="value:filters.type, event: {  change:applyFilters }">
		            <div class="default text">Property Type</div>
		            <i class="angle down icon"></i>
		            <div class="menu">
		            <div class="item" data-value="all">All</div>
		            <div class="item" data-value="apartments">Apartment</div>
		            <div class="item" data-value="independent house">Independent House</div>
		            <div class="item" data-value="villas">Villas</div>
		            <div class="item" data-value="plot">Plot</div>
		            <div class="item" data-value="row house">Row House</div>
		            </div>
		          </div>
		        </div>
		        <div class="item">
		          <div class="ui right labeled icon dropdown button proFilters status">
		            <input type="hidden" name="status" data-bind="value:filters.status, event: {  change:applyFilters }">
		            <div class="default text">Status</div>
		            <i class="angle down icon"></i>
		            <div class="menu">
		              <div class="item" data-value="all">All</div>
		              <div class="item" data-value="ongoing">ongoing</div>
		              <div class="item" data-value="completed">completed</div>
		              <div class="item" data-value="upcoming">upcoming</div>            
		            </div>
		          </div>
		        </div>
		        <div class="item">
		          	<div class="ui right labeled icon dropdown button proFilters price">
					  <input type="hidden" name="order" data-bind="value:filters.order, event: {  change:applyFilters }">
					  <div class="default text">Sort by relevance</div>
					  <i class="sort right icon"></i>
					  <div class="menu">
					    <div class="item" data-value="new">Newest</div>
					    <div class="item" data-value="desc">Price : High to Low</div>
					    <div class="item" data-value="asc">Price : Low to High</div>            
					  </div>
					</div>
		        </div>
		        <div class="item">
		          <div class="ui checkbox _hasDistress_">
		            <input type="checkbox" name="distress">
		            <label>Show Inventory</label>
		          </div>
		        </div>
		    </a>
	  	</div>
	  	<div class="item tempBtn" style="float:right" data-bind="visible:filters.locationFlag()=='true'" >

			<a data-bind="attr:{href:'/agent-listing?projectId='+filters.projectId()+'&name='+filters.name()+'&isLocality=true'}">
			<div style="position:relative;right:0;color:#337ec8">Show agents</div>
			</a>
			</div>
	  	<% } %>
                
                
	  	<div class="_filters_ _hide_" style="text-align:left;display:none" data-bind="visible:isInitPro()">
	  		<span class="ui teal label" data-bind="visible:filters.bhk() != ''">
	  		BHK :
	  		<!--ko text: filters.bhk--><!--/ko-->
    			<!--ko if: filters.bhk() != "" --><i style="margin-right: 0;" data-bind=" event: {  click:function(){removeFilters('bhk')} }" class="remove icon"></i><!--/ko-->
			</span>	    	
			<!-- ko :if(filters.city() ) -->
			    	<span class="ui teal label">
			    		City:
			    		<!-- ko text :filters.city() --><!-- /ko -->
			    	</span>
		    	<!-- /ko -->	
    		<span class="ui teal label" data-bind="visible:filters.type() != ''">
    		Property Type :
    		<!--ko text: filters.type--><!--/ko-->
    			<!--ko if: filters.type() != "" --><i style="margin-right: 0;" data-bind=" event: {  click:function(){removeFilters('type')} }" class="remove icon"></i><!--/ko-->
			</span>				
			<span class="ui teal label" data-bind="visible:filters.status() != ''">
			Status :
			<!--ko text: filters.status--><!--/ko-->
    			<!--ko if: filters.status() != "" --><i style="margin-right: 0;" data-bind=" event: {  click:function(){removeFilters('status')} }" class="remove icon"></i><!--/ko-->
			</span>   	

			<span class="ui teal label" data-bind="visible:filters.name() != ''">
			Name :
			<!--ko text: filters.name--><!--/ko-->
    			<!--ko if: filters.name() != "" --><i style="margin-right: 0;" data-bind=" event: {  click:function(){removeFilters('name')} }" class="remove icon"></i><!--/ko-->

			</span><span class="ui teal label" data-bind="visible:filters.minPrice() >0|| filters.maxPrice() >0">
			Price range :
			<!--ko text: filters.minPrice()>0? filters.minPrice:0 --><!--/ko-->
			<!--ko text: filters.maxPrice()>0?"-"+filters.maxPrice():''--><!--/ko--> 
    			<i style="margin-right: 0;" data-bind=" event: {  click:function(){removeFilters('maxPrice')} }" class="remove icon"></i>

			</span> 
			 	
	  	</div>

	  	
	  	<% if(locals.req.device && locals.req.device.type != 'desktop'){ %>
	  			
	  		<div id="mobile-listing _hide_" class="ui items" data-bind="foreach : projects,visible:isInitPro()" style="margin:0;display:none">
				<a data-bind="attr: { href: 'project/'+ id }" target="_blank">
	  			<div class="item" style="margin:0 0 .5rem;">
					<div class="content" style="background:#fff;padding:1rem;box-shadow:0 0 3px rgba(0,0,0,0.2);">
						<div class="ui tiny image" style="padding: 0 .5rem 0 0 !important;width:auto !important;">
						  <img src="/images/project.jpg" style="width:80px;height:80px;">
						</div>
						<div class="content">
							<div class="like _name_" data-bind="text : name"></div>
						  	<div class="summary">
							    <a class="user"><b>
							      <i class="rupee icon" style="padding:0;margin:0;"></i>
							      <!-- ko if:Array.isArray(priceText) -->
						          <!-- ko foreach:priceText -->
						            <!-- ko if:$index -->-<!-- /ko -->
						              <!-- ko if:$data != 0 -->
						                <!-- ko text:$data --><!-- /ko -->
						              <!-- /ko -->
						              <!-- ko if:$data == 0 -->
						                Not Available
						              <!-- /ko -->
						          <!-- /ko -->
						        <!-- /ko -->
						        <!-- ko if:!Array.isArray(priceText) -->
						          <!-- ko text:priceText --><!-- /ko -->
						        <!-- /ko --></b>
							    </a>
							</div>
						    <div class="date">
					           <span data-bind="foreach : bhk"><a class="proContent" href="javascript:void(0)" data-bind="text:$data"></a><a class="proContent" href="javascript:void(0)">BHK&nbsp;&nbsp;</a></span><span data-bind="text : type"></span>
					        </div>
					        <div class="date" data-bind="text : builtUpArea"></div>
						</div>
						<div class="meta" style="padding-top:1rem;">
				            <span data-bind="text : possession"></span>
				            <span data-bind="text : status"></span>
				        </div>
				        <a href="" class="item right floated leads-in" data-bind="click:function(){$parent.enquireNow($data) }" style="margin-top:-1.4rem"><i style="font-size:1.5em;" class="blue help circle icon"></i></a>
					</div>
				</div></a>
	  		</div>
	  	<% } %> 
	  	
	  	<!-- ends here -->
	    <!-- Project Listing goes here -->
	   <div class="_pnf"  data-bind="visible:(projects().length==0 && isInitPro())" style=" background:#fff;padding: 1rem;color: #7b7b7b;display:none;
             border-left: 2px solid #009fda;box-shadow:0 0 2px rgba(0,0,0,0.2);font-size: 14px;">
	    	No Search Results for this search. <span style="color:#00B2F3;text-transform:capitalize"> Showing agents in  <!-- ko text:filters.city()--><!-- /ko --></span>
	    </div>
	    <div class="" data-bind="visible:(agents().length==0 && projects().length==0) && isInitAg()" style=" background:#fff;padding: 1rem;color: #7b7b7b;
             border-left: 2px solid #009fda;box-shadow:0 0 2px rgba(0,0,0,0.2);font-size: 14px;display:none">
	    	No Search Results for this search. <span style="color:#00B2F3;text-transform:capitalize"> 
	    </div>
	    <div class="ui cards sc grid _hide_ " data-bind="foreach : agents,visible:isInitAg()" style="margin:0;display:none">
	    	
			<div class="card">
			    <div class="ui image tiny">

			      <img src="/images/elliot.jpg" data-bind="attr:{src:$data.imageUrl?$data.imageUrl:'/images/elliot.jpg'}">
			    </div>
			    <div class="content">

			      <a data-bind="attr: { href:irxId}"><div class="header" data-bind="text : name" style="text-transform:capitalize;"></div></a>
			      <!-- ko if($data.hasOwnProperty('companyName')) -->
			      	<a class="group" data-bind="text : companyName" style="color:rgba(0,0,0,0.6);"></a>
			      <!-- /ko -->
			      <!-- ko if(!$data.hasOwnProperty('companyName')) -->
			      	<a class="group" style="color:rgba(0,0,0,0.6);"> Company not found</a>
			      <!-- /ko -->
			      <div class="content addr-ess">
	    			<i class="map marker icon"></i>
	    			<!-- ko if($data.hasOwnProperty('location')) -->
	    				<span data-bind="text : location.city"> </span>
	    			<!-- /ko -->
	    			<!-- ko if(!$data.hasOwnProperty('location')) -->
	    				<span >City not found </span>
	    			<!-- /ko -->
	    		  </div>
			      <div class="description">
			        <span style="float:left">Projects :</span> 
			        <span class="_locProj" data-bind="visible : projects.length==0" style="margin-right:0;">
				 		<span class="header">Not Available</span>
				    </span>
			        <span data-bind="foreach : projects" style="margin-right: 0;width: 72% !important;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;float: left;">
				        <!-- ko if:$index()<=2 -->
				        	<!-- ko if:$index()!=0 -->
				        	 	<span class="header">,</span>
				        	 <!-- /ko -->
				        	<span class="header" data-bind="text : $data"></span>
				        <!-- /ko -->
				    </span>
			        <span data-bind="if:projects.length>3">
			        (+
			        	<span class="header" data-bind="text : projects.length-3"></span>)
			        </span>
			       </div>
			       <div class="description">
			        <span style="float:left">Operating Localities : </span>
			         <span class="_locProj" data-bind="visible : locationProjects.length==0" style="margin-right:0;">
				 		<span class="header">Not Available</span>
				    </span>
			        <span data-bind="foreach : locationProjects" style="margin-right: 0;width: 60% !important;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;float: left;">
				        <!-- ko if:$index()<=2 -->
				        	<!-- ko if:$index()!=0 -->
				        	 	<span class="header">,</span>
				        	<!-- /ko -->
				        	<span class="header" data-bind="text : $data"></span>
				        <!-- /ko -->
				    </span>
			        <span data-bind="if:locationProjects.length>3">
			        (+
			        	<span class="header" data-bind="text : locationProjects.length-3"></span>)
			        </span>
			       </div>
			    </div>
			    <!-- <div class="inline field" data-bind="click:function(){$parent.addAgent(name,irxId)}">
				    <div class="ui checkbox">
				    	<input type="checkbox">
				    	<label></label>
				    </div>
			    </div> -->
			    <div class="extra content">
			    	
					<div class="right floated created">
						<div class="ui label" style="cursor:pointer;" data-bind="click:function(){$parent.addAgent(name,irxId)}">Enquiry</div>
					</div>
			      <!--<a class="friends">
			        <i class="building icon" data-bind="text:projectCounter">&nbsp;</i>
			         &nbsp;&nbsp;Projects
			      </a><a class="friends">
			        <i class="location arrow icon"></i>
			        22 Locations
			      </a>-->
			    </div>
			</div>    
		</div>
		<% if(locals.req.device.type == 'desktop'){ %>
	    <div class="ui relaxed divided items _hide_ grid"style="margin:0;">
	    	<input type="hidden" value="project" id="_searchTypeG_">
	    	<div class="twelve wide column _hide_" data-bind="foreach : projects,visible:isInitPro()" style="padding:0;display:none">
	    		<div class="ui items proj-listing column "><!-- 
  				<a class="ui green ribbon label">Distress</a> -->
  				<div style="width:100%">
					<div class="_csn column" style="position:relative;width:75%">
						<a data-bind="attr: { href: 'project/'+ id }" target="_blank"><h3 class="ui header" data-bind="text: name"></h3></a>
						<h5 class="ui header _rightloc"><i class="marker icon"></i><!--ko text: location.name--><!--/ko-->,<!--ko text: location.city--><!--/ko-->,<!--ko text: location.state--><!--/ko--></h5>
					</div>	
					<div class="_csn" style="width: 23%;float: right;padding-top: .5em;text-align: center;">
						<a class="header" style="padding-top:1rem;"><i class="rupee icon" style="padding-left:0;"></i>
					        <!-- ko if:Array.isArray(priceText) -->
					          <!-- ko foreach:priceText -->
					            <!-- ko if:$index -->-<!-- /ko -->
					              <!-- ko if:$data != 0 -->
					                <!-- ko text:$data --><!-- /ko -->
					              <!-- /ko -->
					              <!-- ko if:$data == 0 -->
					                On Request
					              <!-- /ko -->
					          <!-- /ko -->
					        <!-- /ko -->
					        <!-- ko if:!Array.isArray(priceText) -->
					          <!-- ko text:priceText --><!-- /ko -->
					        <!-- /ko -->
					    </a>
					</div>
  				</div>
				<div class="item" style="margin-bottom:0 !important;">
				  <div id="_projImg" class="ui small image">
				       <!--ko if:$data.gallery && $data.gallery!=null && $data.gallery.length>0  -->

				       <img src="" data-bind="attr:{src: gallery[0],'data-size':gallery.length,'index':$index}" data-curr="0" class='projectImage' style="height:142px">
				       <div class="slider">
				        	<i class="chevron right icon pagination" data-bind="visible:$data.gallery.length>1" ></i>
					        <span><!--ko text:$data.gallery.length --><!--/ko--> PHOTO   </span>
                         
				       	 	<i class="chevron left icon pagination" data-bind="visible:$data.gallery.length>1"></i>
				      </div> 
				       <!--/ko -->

				       <!--ko if:(!$data.gallery || $data.gallery==null || $data.gallery.length==0)  -->
				       <img src="/images/project.jpg">
				       <div class="slider"></div> 
				       <!--/ko -->
				  </div>
				  <div class="content">
				    
				    <div class="ui two column grid" style="margin-top:0">
				    	<div class="_csn twelve wide column" style="padding:0;">
				    		<table class="ui small table pj-items extra column">
						      <tbody>
						      		<tr>
						      			<td class="_unit_">Builder</td>
						      			<td><!--ko text: builderName--><!--/ko--></td>
						      		</tr>
									<tr>
									  <td class="_unit_">Property Type <!-- ko text:type.length --><!-- /ko --></td>
									  <!-- ko if:type.length >1 -->
									  	<td><!--ko foreach: type--><!-- ko text:$data --><!-- /ko -->&nbsp;<!--/ko--></td>
									  <!-- /ko -->
									  <!-- ko if:type.length <=1 -->
									  	<td><!-- ko text:type --><!-- /ko --></td>
									  <!-- /ko -->
									</tr>
									<tr>
									  <td class="_unit_">Unit</td>
									  <td><span data-bind="foreach : bhk"><a class="proContent" href="javascript:void(0)" data-bind="text:$data"></a><a class="proContent" href="javascript:void(0)">BHK&nbsp;&nbsp;</a></td>
									</tr>
									<tr>
									  <td class="_unit_">Possesion</td>
									  <td><!--ko text: possession--><!--/ko--></td>
									</tr>
									<tr>
									  <td class="_unit_">Area</td>
									  <td><!--ko text: builtUpArea--><!--/ko--></td>
									</tr>
									  <td class="_unit_">Status</td><td><!--ko text: status--><!--/ko--></td>		
									</tr>
								</tbody>
						    </table>
					      <input type="hidden" id="__filterName" value="<%= requestObj.name?requestObj.name:'' %>">
					      <input type="hidden" id="__filterBhk" value="<%= requestObj.bhk?requestObj.bhk:'' %>">
					      <input type="hidden" id="__filterType" value="<%= requestObj.type?requestObj.type:'' %>">
					      <input type="hidden" id="__projectIdFilter" value="<%= requestObj.projectId?requestObj.projectId:'' %>">
		  					<input type="hidden" id="__locationFlag" value="<%= requestObj.isLocality?requestObj.isLocality:'' %>">
		  					<input type="hidden" id="__minPrice" value="<%= requestObj.minPrice?requestObj.minPrice:'' %>">
		  					<input type="hidden" id="__maxPrice" value="<%= requestObj.maxPrice?requestObj.maxPrice:'' %>">
		  					
					  	</div>
					    <div class="_csn four wide column" style="padding:0;">
					      <div class="ui  item _actButtons">
					     	 <div class="ui basic button" data-bind="html:$parent.fbIntegration($data)"></div>
					        <div class="ui basic button" onClick="function(){}"><a data-bind="attr: { 'href': '/project/'+ id }" target="_blank">View details</a></div>
					        <div class="ui basic button leads-in" data-bind="click:function(){$parent.enquireNow($data) }">Enquire</div>
					        <div class="ui basic button"><a data-bind="attr: { 'href': '/agent-listing?projectId='+id+'&name='+name}">View agents</a></div>

					      </div>
					    </div>
				    </div>
				  </div>
				</div>
			</div>
	    	</div>
                 
	    	 <div class="four wide column" data-bind="visible:projects().length!=0" style=" padding:0 1rem;font-size: 14px;box-shadow: 0 0 0;">
	    		<!-- <img src="/img/banner.png" style="width:100%;">
	    		<img src="/img/banner.png" style="width:100%;">
	    		<img src="/img/banner.png" style="width:100%;">
	    		<img src="/img/banner.png" style="width:100%;"> -->
	    	</div>
			<!-- <div data-bind="scroll: true, scrollOptions: { loadFunc: addSome, offset: 10 }"></div> -->
		</div>
		<% } %>
                
        <div style="width:100%">
                 <div  class="ui steps" style="margin:auto;display:none" data-bind="visible:hasMore()" onclick="javascript:project.listProjects(false)"> 
                
				  <div class="link step">
				    <i class="chevron circle down icon"></i>
				    <div class="content">
				      <div class="title">Next Page (<!--ko text:(projects().length)--> <!--/ko-->-<!--ko text:(projects().length+10)--> <!--/ko-->) </div>
				      <div class="description"></div>
				    </div>
				  </div>

                </div>
            </div>
                
        
	    <!-- Project ends here -->
	</div>
	</div>
	</div>
	

  <% include ../partials/footer.html.ejs %>
    <script type="text/javascript" src="/js/project.js"></script>
  </body>
</html>
