<!DOCTYPE html>
<html>
<head>
  <% include ../partials/head.html.ejs %>
  
</head>
<% locals.uiContext.menu=false %>
<body>  
  <% include ../partials/header.html.ejs %>
  <% include ../partials/sidebar.html.ejs %>
  <% include ../partials/login.html.ejs %>

  <!-- Bg image starts here -->

  	<div id="homepage" class="ui grid">
	  <div class="doubling two column row">
	    <div class="column left-bg"></div><div class="column right-bg"></div>
	  </div>
	</div>
	<!-- Bg image ends here -->	
  <% include ../partials/searchbar.html.ejs %>

  <!-- agents Listing goes here -->

  	<div id="projectContent" class="ui centered page grid">
	  <div class="fourteen wide column">

	  	<div class="ui grid two column rib-head">
	    	<h2 class="ui header column">Showing results <a>20 out of 50</a></h2>
	    	<div class="header ui two column grid right menu">
	    		<div class="six wide column">
			        <div class="ui selection dropdown">
			          <input type="hidden" name="city">
			          <div class="default text">Property Type</div>
			          <i class="angle down icon"></i>
			          <div class="menu">
			            <div class="item" data-value="NewD">Apartment</div>
			            <div class="item" data-value="Bang">Independent House</div>
			            <div class="item" data-value="Mum">Independent Floor</div>
			            <div class="item" data-value="Che">Penthouse</div>
			          </div>
			        </div>
			      </div>
				<div class="ui selection dropdown item">
				    Sort by relevance
				    <div class="menu">
				      <div class="item">Newest</div>
				      <div class="item">Price : High to Low</div>
				      <div class="item">Price : Low to High</div>
				    </div>
				    <i class="sort right icon"></i>
				  </div>
	    	</div>
	    </div>  

	    <div class="ui items proj-listing" data-bind="foreach : projects">
	    	<div class="four column row">
			    <div class="left floated column">
			    	<h3 class="ui header " data-bind="text : name">12 Years a Slave</h3><h5 class="ui header"><i class="marker icon"></i>Union Square 14</h5>
			    </div>
			    <div class="right floated column">
				  	<div class="extra">
				    	<span class="cinema">Posession date :<a class="header " data-bind="text : date">Nov 12,2014</a></span>
				  	</div>			    	
			    </div>
			</div>
			<div class="item">
				<div class="image">
				  <img src="/images/square-image.png">
				</div>
				<div class="content">				  
				  <div class="ui left floated">				  	
					<div class="extra">
						<h2 class="ui header"><i class="rupee icon"></i>10,000 - 50,000</h2>
					</div>
					<div class="pj-items">
						<span class="cinema">BHK :<a href="header">1,2,3,4</a></span>
						<span class="cinema">Property type :<a href="header">Apartment</a></span>
					</div>
				  	<div class="description" data-bind="text : description">
					    In the pre-Civil War United States, Solomon Northup, a free black man from upstate New York, is abducted and sold into slavery. Facing cruelty as well as unexpected kindnesses Solomon struggles not only to stay alive, but to retain his dignity. In the twelfth year of his unforgettable odyssey, Solomonâ€™s chance meeting with a Canadian abolitionist will forever alter his life.
					  </div>
				  </div>
				  <div class="ui right floated">
					<div class="ui basic button">View details</div>
					<div class="ui basic button">Enquiry now</div>
					<div class="ui basic button">View agents</div>
					<div class="ui basic button">Download details</div>
				  </div>
				</div>				  
			</div>

	  </div>    
	</div>
	<script type="text/javascript">
	function Project(options){
		this.page = {
			start : 0,
			pageSize : 3
		}
	}
	Project.prototype.init = function() {

		var _classInstance = this;
		_classInstance.viewModel = {
			projects: ko.observableArray(),
			filters:{
				name: ko.observable(""),
				type: ko.observable(""),
				bhk: ko.observable("")
			},
			handleSubmit : function(){
				_classInstance.listProjects(true);
			}
		}
		 ko.applyBindings(_classInstance.viewModel);
		_classInstance.listProjects()
	}
	
	Project.prototype.listProjects = function(replace) {
    	var classInstance = this;
	    httpUtils.post("/list-projects",{filters:classInstance.viewModel.filters,page:classInstance.page},"JSON",function(data){
	       if(data.status==0){
	       	if(typeof(replace) != undefined && replace){
	       		classInstance.viewModel.projects([]);
	       	} 
	       		ko.utils.arrayPushAll(classInstance.viewModel.projects,data.result)	
	       	
	        
	        classInstance.page.start = Number(data.page.start)+Number(data.page.pageSize);
	        }
		})
	 }

	$(document).ready(function(){
	  
	    var project = new Project();
	    project.init();
	    
	  })
	</script>
</body>