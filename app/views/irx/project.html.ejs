<!DOCTYPE html>
<html>
<head>
  <% include ../partials/head.html.ejs %>
  
</head>
<% locals.uiContext.menu=false %>
<body>  
  <% include ../partials/header.html.ejs %>
  <% include ../partials/sidebar.html.ejs %>
  <% include ../partials/login.html.ejs %>

  <!-- Bg image starts here -->

  	<div id="homepage" class="ui grid">
	  <div class="doubling two column row">
	    <div class="column left-bg"></div><div class="column right-bg"></div>
	  </div>
	</div>
	<!-- Bg image ends here -->	
  <% include ../partials/searchbar.html.ejs %>

  <!-- agents Listing goes here -->

  	<div id="agentContent" class="ui centered page grid">
	  <div class="fourteen wide column">

	  	<div class="ui grid two column rib-head">
	    	<h2 class="ui header column">Showing results <a>20 out of 50</a></h2>
	    	<div class="header column right menu">
	    		<div class="ui checkbox">
			      <input type="checkbox">
			      <label>Top 5 brokers</label>
			    </div>
				<div class="ui blue basic button">submit request</div>
	    	</div>
	    </div>  

	    <div class="ui items" data-bind="foreach : projects">
		  <div class="item">
		    <div class="image">
		      <img src="/images/square-image.png">
		    </div>
		    <div class="content">
		      <a class="header " data-bind="text : name">12 Years a Slave</a>
		      <div class="meta">
		        <span class="cinema">Union Square 14</span>
		      </div>
		      <div class="description" data-bind="text : description">
		        In the pre-Civil War United States, Solomon Northup, a free black man from upstate New York, is abducted and sold into slavery. Facing cruelty as well as unexpected kindnesses Solomon struggles not only to stay alive, but to retain his dignity. In the twelfth year of his unforgettable odyssey, Solomonâ€™s chance meeting with a Canadian abolitionist will forever alter his life.
		      </div>
		      <div class="extra">
		        <div class="ui right floated disabled red button">Sold Out</div>
		        <div class="ui horizontal label">IMAX</div>
		        <div class="ui horizontal label"><i class="globe icon"></i> Additional Languages</div>
		      </div>
		    </div>
		  </div>

	  </div>    
	</div>
	<script type="text/javascript">
	function Project(options){
		this.page = {
			start : 0,
			pageSize : 3
		}
	}
	Project.prototype.init = function() {

		var _classInstance = this;
		_classInstance.viewModel = {
			projects: ko.observableArray(),
			filters:{
				name: ko.observable(""),
				type: ko.observable(""),
				bhk: ko.observable("")
			},
			handleSubmit : function(){
				_classInstance.listProjects(true);
			}
		}
		 ko.applyBindings(_classInstance.viewModel);
		_classInstance.listProjects()
	}
	
	Project.prototype.listProjects = function(replace) {
    	var classInstance = this;
	    httpUtils.post("/list-projects",{filters:classInstance.viewModel.filters,page:classInstance.page},"JSON",function(data){
	       if(data.status==0){
	       	if(typeof(replace) != undefined && replace){
	       		classInstance.viewModel.projects([]);
	       	} 
	       		ko.utils.arrayPushAll(classInstance.viewModel.projects,data.result)	
	       	
	        
	        classInstance.page.start = Number(data.page.start)+Number(data.page.pageSize);
	        }
		})
	 }

	$(document).ready(function(){
	  
	    var project = new Project();
	    project.init();
	    
	  })
	</script>
</body>